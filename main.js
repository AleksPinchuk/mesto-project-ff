(()=>{"use strict";var e=document.querySelector("#card-template").content;function t(e){e.target.closest(".card").remove()}function n(e){e.target.classList.toggle("card__like-button_is-active")}function r(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",c)}function o(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",c)}function c(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&o(t)}}var i=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.classList.remove("button_inactive"):t.classList.add("button_inactive")},a=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__add-button"),d=(document.querySelectorAll(".popup__close"),document.querySelectorAll(".card__image"),document.querySelector(".popup_type_image")),l=d.querySelector(".popup__image"),p=d.querySelector(".popup__caption"),s=document.querySelector(".popup_type_new-card"),_=document.querySelector(".places__list"),m=document.querySelector("#new-place"),y=document.querySelector(".popup__input_type_card-name"),f=document.querySelector(".popup__input_type_url"),v=document.querySelector(".popup_type_edit"),k=document.querySelector("#edit-profile"),q=k.querySelector(".popup__input_type_name"),S=k.querySelector(".popup__input_type_description"),L=document.querySelector(".profile__title"),g=document.querySelector(".profile__description");function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend",r=function(t){var n=t.name,r=t.link,o=t.deleteCard,c=t.handleLikeButton,i=t.handleImageClick,a=e.querySelector(".card").cloneNode(!0),u=a.querySelector(".card__image"),d=a.querySelector(".card__title"),l=a.querySelector(".card__like-button"),p=a.querySelector(".card__delete-button");return u.src=r,u.alt=n,d.textContent=n,l.addEventListener("click",c),u.addEventListener("click",(function(){return i(r,n)})),p.addEventListener("click",o),a}(t);_[n](r)}function E(e,t){console.log(t,e),r(d),l.src=e,l.alt=t,p.textContent=t}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){h({name:e.name,link:e.link,deleteCard:t,handleLikeButton:n,handleImageClick:E},"append")})),a.addEventListener("click",(function(){q.value=L.textContent,S.value=g.textContent,r(v)})),u.addEventListener("click",(function(){return r(s)})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_is-opened")&&o(e),t.target.classList.contains("popup__close")&&o(e)}))})),k.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=q.value,g.textContent=S.value,o(v)})),m.addEventListener("submit",(function(e){e.preventDefault(),h({name:y.value,link:f.value,deleteCard:t,handleLikeButton:n,handleImageClick:E},"prepend"),m.reset(),o(s)})),Array.from(document.querySelectorAll(".form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(".form__set")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".form__input")),n=e.querySelector(".form__submit");i(t,n),t.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.classList.remove("form__input-error_active"),n.textContent=""}(e,t):function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),r.textContent=n,r.classList.add("form__input-error_active")}(e,t,t.validationMessage)}(e,r),i(t,n)}))}))}(e)}))}))})();