(()=>{"use strict";var e=document.querySelector("#card-template").content;function t(e){e.target.closest(".card").remove()}function r(e){e.target.classList.toggle("card__like-button_is-active")}function n(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",u)}function o(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",u)}function u(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&o(t)}}var i=function(e){var t=e.formSelector,r=e.inputSelector,n=e.submitButtonSelector,o=e.inactiveButtonClass,u=e.inputErrorClass,i=e.errorClass;Array.from(document.querySelectorAll(t)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=e.formElement,r=e.inputSelector,n=e.submitButtonSelector,o=e.inactiveButtonClass,u=e.inputErrorClass,i=e.errorClass,l=Array.from(t.querySelectorAll(r)),a=t.querySelector(n);s({inputList:l,submitButtonElement:a,inactiveButtonClass:o}),l.forEach((function(e){e.addEventListener("input",(function(){!function(e){var t=e.formElement,r=e.inputElement,n=e.inputErrorClass,o=e.errorClass;r.validity.patternMismatch?r.setCustomValidity(r.dataset.errorMessage):r.setCustomValidity(""),r.validity.valid?function(e){var t=e.formElement,r=e.inputElement,n=e.errorClass,o=e.inputErrorClass,u=t.querySelector(".".concat(r.id,"-error"));r.classList.remove(o),u.classList.remove(n),u.textContent=""}({formElement:t,inputElement:r,errorClass:o,inputErrorClass:n}):function(e){var t=e.inputElement,r=e.inputErrorClass,n=e.errorClass,o=e.errorMessage,u=e.formElement.querySelector(".".concat(t.id,"-error"));t.classList.add(r),u.textContent=o,u.classList.add(n)}({formElement:t,inputElement:r,errorMessage:r.validationMessage,errorClass:o,inputErrorClass:n})}({formElement:t,inputElement:e,inputErrorClass:u,errorClass:i}),s({inputList:l,submitButtonElement:a,inactiveButtonClass:o})}))}))}({formElement:e,inputSelector:r,submitButtonSelector:n,inactiveButtonClass:o,inputErrorClass:u,errorClass:i})}))},s=function(e){var t=e.inputList,r=e.submitButtonElement,n=e.inactiveButtonClass;!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?(r.classList.remove(n),r.disabled=!1):(r.classList.add(n),r.disabled=!0)};i({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"});var l=document.querySelector(".profile__edit-button"),a=document.querySelector(".profile__add-button"),p=(document.querySelectorAll(".popup__close"),document.querySelectorAll(".card__image"),document.querySelector(".popup_type_image")),c=p.querySelector(".popup__image"),d=p.querySelector(".popup__caption"),m=document.querySelector(".popup_type_new-card"),_=document.querySelector(".places__list"),v=document.querySelector("#new-place"),f=document.querySelector(".popup__input_type_card-name"),y=document.querySelector(".popup__input_type_url"),C=document.querySelector(".popup_type_edit"),E=document.querySelector("#edit-profile"),S=E.querySelector(".popup__input_type_name"),k=E.querySelector(".popup__input_type_description"),q=document.querySelector(".profile__title"),b=document.querySelector(".profile__description");function L(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prepend",n=function(t){var r=t.name,n=t.link,o=t.deleteCard,u=t.handleLikeButton,i=t.handleImageClick,s=e.querySelector(".card").cloneNode(!0),l=s.querySelector(".card__image"),a=s.querySelector(".card__title"),p=s.querySelector(".card__like-button"),c=s.querySelector(".card__delete-button");return l.src=n,l.alt=r,a.textContent=r,p.addEventListener("click",u),l.addEventListener("click",(function(){return i(n,r)})),c.addEventListener("click",o),s}(t);_[r](n)}function g(e,t){console.log(t,e),n(p),c.src=e,c.alt=t,d.textContent=t}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){L({name:e.name,link:e.link,deleteCard:t,handleLikeButton:r,handleImageClick:g},"append")})),l.addEventListener("click",(function(){S.value=q.textContent,k.value=b.textContent,n(C)})),a.addEventListener("click",(function(){return n(m)})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_is-opened")&&o(e),t.target.classList.contains("popup__close")&&o(e)}))})),E.addEventListener("submit",(function(e){e.preventDefault(),q.textContent=S.value,b.textContent=k.value,o(C)})),v.addEventListener("submit",(function(e){e.preventDefault(),L({name:f.value,link:y.value,deleteCard:t,handleLikeButton:r,handleImageClick:g},"prepend"),v.reset(),o(m)})),i({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"})})();